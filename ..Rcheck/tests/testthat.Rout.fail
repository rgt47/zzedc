
R version 4.5.2 (2025-10-31) -- "[Not] Part in a Rumble"
Copyright (C) 2025 The R Foundation for Statistical Computing
Platform: aarch64-apple-darwin20

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type 'license()' or 'licence()' for distribution details.

R is a collaborative project with many contributors.
Type 'contributors()' for more information and
'citation()' on how to cite R or R packages in publications.

Type 'demo()' for some demos, 'help()' for on-line help, or
'help.start()' for an HTML browser interface to help.
Type 'q()' to quit R.

> library(testthat)
> library(zzedc)
Loading required package: zzedc.validation

Attaching package: 'zzedc'

The following object is masked from 'package:zzedc.validation':

    validate_form

> 
> test_check("zzedc")

Attaching package: 'bslib'

The following object is masked from 'package:utils':

    page

Do not use `library(config)` to attach the config package.
Use `config::get()` directly.
Attaching the config package can lead to namespace conflicts.

Attaching package: 'config'

The following objects are masked from 'package:base':

    get, merge

Loading required package: ggplot2

Attaching package: 'DT'

The following objects are masked from 'package:shiny':

    dataTableOutput, renderDataTable

<pool> Checked-out object deleted before being returned.
<pool> Make sure to `poolReturn()` all objects retrieved with `poolCheckout().`
[ FAIL 63 | WARN 35 | SKIP 5 | PASS 341 ]

══ Skipped tests (5) ═══════════════════════════════════════════════════════════
• Requires Shiny test server context (1): 'test-edge-cases.R:69:3'
• Requires implementing password hashing test utility (1):
  'test-auth-legacy.R:11:3'
• Requires test database (1): 'test-auth-legacy.R:15:3'
• Requires test database and session tracking (1): 'test-auth-legacy.R:19:3'
• Requires test database setup (1): 'test-auth-legacy.R:7:3'

══ Failed tests ════════════════════════════════════════════════════════════════
── Failure ('test-config.R:89:3'): configuration values have correct types ─────
cfg$auth$default_salt has type 'NULL', not 'character'.
── Failure ('test-config.R:212:3'): configuration auth settings are secure ─────
nchar(prod_cfg$auth$default_salt) >= 20 is not TRUE

`actual`:       
`expected`: TRUE
── Failure ('test-config.R:220:3'): configuration auth settings are secure ─────
dev_cfg$auth$default_salt == prod_cfg$auth$default_salt is not FALSE

`actual`:        
`expected`: FALSE
── Error ('test-edge-cases.R:8:3'): validate_filename handles path traversal attempts ──
Error in `validate_filename("../../../etc/passwd")`: could not find function "validate_filename"
Backtrace:
    ▆
 1. └─testthat::expect_equal(...) at test-edge-cases.R:8:3
 2.   └─testthat::quasi_label(enquo(object), label, arg = "object")
 3.     └─rlang::eval_bare(expr, quo_get_env(quo))
── Failure ('test-edge-cases.R:30:3'): validate_numeric_range rejects out-of-bounds values ──
Expected `validate_numeric_range(50, min = 0, max = 100)` to run without any errors.
i Actually got a <simpleError> with text:
  could not find function "validate_numeric_range"
── Error ('test-edge-cases.R:37:3'): audit logging handles empty log ───────────
Error in `.getReactiveEnvironment()$currentContext()`: Operation not allowed without an active reactive context.
* You tried to do something that can only be done from inside a reactive consumer.
Backtrace:
     ▆
  1. ├─testthat::expect_equal(nrow(audit_log()), 0) at test-edge-cases.R:37:3
  2. │ └─testthat::quasi_label(enquo(object), label, arg = "object")
  3. │   └─rlang::eval_bare(expr, quo_get_env(quo))
  4. ├─base::nrow(audit_log())
  5. └─shiny (local) audit_log()
  6.   └─rv$get()
  7.     └─private$dependents$register()
  8.       └─shiny:::getCurrentContext()
  9.         └─.getReactiveEnvironment()$currentContext()
 10.           └─rlang::abort(...)
── Error ('test-edge-cases.R:94:3'): query_audit_log filters correctly ─────────
Error in `.getReactiveEnvironment()$currentContext()`: Operation not allowed without an active reactive context.
* You tried to do something that can only be done from inside a reactive consumer.
Backtrace:
    ▆
 1. └─zzedc::log_audit_event(audit_log, "user1", "LOGIN", "auth", status = "success") at test-edge-cases.R:94:3
 2.   └─shiny (local) audit_log()
 3.     └─rv$get()
 4.       └─private$dependents$register()
 5.         └─shiny:::getCurrentContext()
 6.           └─.getReactiveEnvironment()$currentContext()
 7.             └─rlang::abort(...)
── Error ('test-export-formats.R:88:3'): export_to_file returns error when haven not available for SAS ──
Error in `skip_if_installed("haven")`: could not find function "skip_if_installed"
── Failure ('test-export-formats.R:134:3'): generate_export_filename sanitizes user input ──
grepl("\\.\\.", filename) is not FALSE

`actual`:   TRUE 
`expected`: FALSE
── Error ('test-home-module.R:9:3'): home_ui function generates correct structure ──
Error in `instrument_import_ui("instrument_import")`: could not find function "instrument_import_ui"
Backtrace:
    ▆
 1. └─global home_ui("test_home") at test-home-module.R:9:3
 2.   ├─htmltools::tagList(...)
 3.   │ └─rlang::dots_list(...)
 4.   ├─shiny::fluidRow(column(12, instrument_import_ui("instrument_import")))
 5.   │ └─htmltools::div(class = "row", ...)
 6.   │   └─rlang::dots_list(...)
 7.   └─shiny::column(12, instrument_import_ui("instrument_import"))
 8.     └─htmltools::div(class = colClass, ...)
 9.       └─rlang::dots_list(...)
── Error ('test-home-module.R:36:3'): home_ui contains proper bsicons ──────────
Error in `instrument_import_ui("instrument_import")`: could not find function "instrument_import_ui"
Backtrace:
    ▆
 1. └─global home_ui("test_home") at test-home-module.R:36:3
 2.   ├─htmltools::tagList(...)
 3.   │ └─rlang::dots_list(...)
 4.   ├─shiny::fluidRow(column(12, instrument_import_ui("instrument_import")))
 5.   │ └─htmltools::div(class = "row", ...)
 6.   │   └─rlang::dots_list(...)
 7.   └─shiny::column(12, instrument_import_ui("instrument_import"))
 8.     └─htmltools::div(class = colClass, ...)
 9.       └─rlang::dots_list(...)
── Error ('test-home-module.R:48:3'): home_ui has correct responsive structure ──
Error in `instrument_import_ui("instrument_import")`: could not find function "instrument_import_ui"
Backtrace:
    ▆
 1. └─global home_ui("test_home") at test-home-module.R:48:3
 2.   ├─htmltools::tagList(...)
 3.   │ └─rlang::dots_list(...)
 4.   ├─shiny::fluidRow(column(12, instrument_import_ui("instrument_import")))
 5.   │ └─htmltools::div(class = "row", ...)
 6.   │   └─rlang::dots_list(...)
 7.   └─shiny::column(12, instrument_import_ui("instrument_import"))
 8.     └─htmltools::div(class = colClass, ...)
 9.       └─rlang::dots_list(...)
── Error ('test-home-module.R:62:3'): home_ui includes security and compliance information ──
Error in `instrument_import_ui("instrument_import")`: could not find function "instrument_import_ui"
Backtrace:
    ▆
 1. └─global home_ui("test_home") at test-home-module.R:62:3
 2.   ├─htmltools::tagList(...)
 3.   │ └─rlang::dots_list(...)
 4.   ├─shiny::fluidRow(column(12, instrument_import_ui("instrument_import")))
 5.   │ └─htmltools::div(class = "row", ...)
 6.   │   └─rlang::dots_list(...)
 7.   └─shiny::column(12, instrument_import_ui("instrument_import"))
 8.     └─htmltools::div(class = colClass, ...)
 9.       └─rlang::dots_list(...)
── Error ('test-home-module.R:78:3'): home_ui provides proper navigation guidance ──
Error in `instrument_import_ui("instrument_import")`: could not find function "instrument_import_ui"
Backtrace:
    ▆
 1. └─global home_ui("test_home") at test-home-module.R:78:3
 2.   ├─htmltools::tagList(...)
 3.   │ └─rlang::dots_list(...)
 4.   ├─shiny::fluidRow(column(12, instrument_import_ui("instrument_import")))
 5.   │ └─htmltools::div(class = "row", ...)
 6.   │   └─rlang::dots_list(...)
 7.   └─shiny::column(12, instrument_import_ui("instrument_import"))
 8.     └─htmltools::div(class = colClass, ...)
 9.       └─rlang::dots_list(...)
── Error ('test-home-module.R:97:3'): home_ui contact information is present ───
Error in `instrument_import_ui("instrument_import")`: could not find function "instrument_import_ui"
Backtrace:
    ▆
 1. └─global home_ui("test_home") at test-home-module.R:97:3
 2.   ├─htmltools::tagList(...)
 3.   │ └─rlang::dots_list(...)
 4.   ├─shiny::fluidRow(column(12, instrument_import_ui("instrument_import")))
 5.   │ └─htmltools::div(class = "row", ...)
 6.   │   └─rlang::dots_list(...)
 7.   └─shiny::column(12, instrument_import_ui("instrument_import"))
 8.     └─htmltools::div(class = colClass, ...)
 9.       └─rlang::dots_list(...)
── Error ('test-home-module.R:108:3'): home_ui includes documentation links ────
Error in `instrument_import_ui("instrument_import")`: could not find function "instrument_import_ui"
Backtrace:
    ▆
 1. └─global home_ui("test_home") at test-home-module.R:108:3
 2.   ├─htmltools::tagList(...)
 3.   │ └─rlang::dots_list(...)
 4.   ├─shiny::fluidRow(column(12, instrument_import_ui("instrument_import")))
 5.   │ └─htmltools::div(class = "row", ...)
 6.   │   └─rlang::dots_list(...)
 7.   └─shiny::column(12, instrument_import_ui("instrument_import"))
 8.     └─htmltools::div(class = colClass, ...)
 9.       └─rlang::dots_list(...)
── Error ('test-home-module.R:118:3'): home_ui has proper accessibility attributes ──
Error in `instrument_import_ui("instrument_import")`: could not find function "instrument_import_ui"
Backtrace:
    ▆
 1. └─global home_ui("test_home") at test-home-module.R:118:3
 2.   ├─htmltools::tagList(...)
 3.   │ └─rlang::dots_list(...)
 4.   ├─shiny::fluidRow(column(12, instrument_import_ui("instrument_import")))
 5.   │ └─htmltools::div(class = "row", ...)
 6.   │   └─rlang::dots_list(...)
 7.   └─shiny::column(12, instrument_import_ui("instrument_import"))
 8.     └─htmltools::div(class = colClass, ...)
 9.       └─rlang::dots_list(...)
── Error ('test-home-module.R:131:3'): home_ui follows bslib design patterns ───
Error in `instrument_import_ui("instrument_import")`: could not find function "instrument_import_ui"
Backtrace:
    ▆
 1. └─global home_ui("test_home") at test-home-module.R:131:3
 2.   ├─htmltools::tagList(...)
 3.   │ └─rlang::dots_list(...)
 4.   ├─shiny::fluidRow(column(12, instrument_import_ui("instrument_import")))
 5.   │ └─htmltools::div(class = "row", ...)
 6.   │   └─rlang::dots_list(...)
 7.   └─shiny::column(12, instrument_import_ui("instrument_import"))
 8.     └─htmltools::div(class = colClass, ...)
 9.       └─rlang::dots_list(...)
── Error ('test-home-module.R:148:3'): home_ui namespace is properly applied ───
Error in `instrument_import_ui("instrument_import")`: could not find function "instrument_import_ui"
Backtrace:
    ▆
 1. └─global home_ui("test_namespace") at test-home-module.R:148:3
 2.   ├─htmltools::tagList(...)
 3.   │ └─rlang::dots_list(...)
 4.   ├─shiny::fluidRow(column(12, instrument_import_ui("instrument_import")))
 5.   │ └─htmltools::div(class = "row", ...)
 6.   │   └─rlang::dots_list(...)
 7.   └─shiny::column(12, instrument_import_ui("instrument_import"))
 8.     └─htmltools::div(class = colClass, ...)
 9.       └─rlang::dots_list(...)
── Failure ('test-instrument-library.R:52:3'): list_available_instruments returns metadata for known instruments ──
nrow(result) (`actual`) not equal to 1 (`expected`).

  `actual`: 2.0
`expected`: 1.0
── Error ('test-instrument-library.R:248:3'): import_instrument validates instrument exists ──
Error in `value[[3L]](cond)`: Instrument not found: nonexistent
Backtrace:
    ▆
 1. └─zzedc::import_instrument(...) at test-instrument-library.R:248:3
 2.   └─base::tryCatch(...)
 3.     └─base (local) tryCatchList(expr, classes, parentenv, handlers)
 4.       └─base (local) tryCatchOne(expr, names, parentenv, handlers[[1L]])
 5.         └─value[[3L]](cond)
── Error ('test-integration.R:78:3'): module integration works correctly ───────
Error in `instrument_import_ui("instrument_import")`: could not find function "instrument_import_ui"
Backtrace:
    ▆
 1. └─global home_ui("test_home") at test-integration.R:78:3
 2.   ├─htmltools::tagList(...)
 3.   │ └─rlang::dots_list(...)
 4.   ├─shiny::fluidRow(column(12, instrument_import_ui("instrument_import")))
 5.   │ └─htmltools::div(class = "row", ...)
 6.   │   └─rlang::dots_list(...)
 7.   └─shiny::column(12, instrument_import_ui("instrument_import"))
 8.     └─htmltools::div(class = colClass, ...)
 9.       └─rlang::dots_list(...)
── Failure ('test-integration.R:295:7'): complete application startup simulation works ──
Expected `{ ... }` to run without any errors.
i Actually got a <simpleError> with text:
  could not find function "instrument_import_ui"
── Failure ('test-launch_zzedc.R:40:3'): package structure is valid ────────────
file.exists("ui.R") is not TRUE

`actual`:   FALSE
`expected`: TRUE 
── Failure ('test-launch_zzedc.R:41:3'): package structure is valid ────────────
file.exists("server.R") is not TRUE

`actual`:   FALSE
`expected`: TRUE 
── Failure ('test-launch_zzedc.R:42:3'): package structure is valid ────────────
file.exists("global.R") is not TRUE

`actual`:   FALSE
`expected`: TRUE 
── Failure ('test-launch_zzedc.R:45:3'): package structure is valid ────────────
dir.exists("R") is not TRUE

`actual`:   FALSE
`expected`: TRUE 
── Failure ('test-launch_zzedc.R:46:3'): package structure is valid ────────────
file.exists("R/launch_zzedc.R") is not TRUE

`actual`:   FALSE
`expected`: TRUE 
── Failure ('test-launch_zzedc.R:47:3'): package structure is valid ────────────
file.exists("R/zzedc-package.R") is not TRUE

`actual`:   FALSE
`expected`: TRUE 
── Failure ('test-launch_zzedc.R:50:3'): package structure is valid ────────────
file.exists("DESCRIPTION") is not TRUE

`actual`:   FALSE
`expected`: TRUE 
── Failure ('test-launch_zzedc.R:60:5'): key app components exist ──────────────
file.exists(file) is not TRUE

`actual`:   FALSE
`expected`: TRUE 
Missing file: ui.R
── Failure ('test-launch_zzedc.R:60:5'): key app components exist ──────────────
file.exists(file) is not TRUE

`actual`:   FALSE
`expected`: TRUE 
Missing file: server.R
── Failure ('test-launch_zzedc.R:60:5'): key app components exist ──────────────
file.exists(file) is not TRUE

`actual`:   FALSE
`expected`: TRUE 
Missing file: global.R
── Failure ('test-launch_zzedc.R:60:5'): key app components exist ──────────────
file.exists(file) is not TRUE

`actual`:   FALSE
`expected`: TRUE 
Missing file: home.R
── Failure ('test-launch_zzedc.R:60:5'): key app components exist ──────────────
file.exists(file) is not TRUE

`actual`:   FALSE
`expected`: TRUE 
Missing file: edc.R
── Failure ('test-launch_zzedc.R:60:5'): key app components exist ──────────────
file.exists(file) is not TRUE

`actual`:   FALSE
`expected`: TRUE 
Missing file: auth.R
── Failure ('test-launch_zzedc.R:60:5'): key app components exist ──────────────
file.exists(file) is not TRUE

`actual`:   FALSE
`expected`: TRUE 
Missing file: savedata.R
── Failure ('test-launch_zzedc.R:60:5'): key app components exist ──────────────
file.exists(file) is not TRUE

`actual`:   FALSE
`expected`: TRUE 
Missing file: report1.R
── Failure ('test-launch_zzedc.R:60:5'): key app components exist ──────────────
file.exists(file) is not TRUE

`actual`:   FALSE
`expected`: TRUE 
Missing file: report2.R
── Failure ('test-launch_zzedc.R:60:5'): key app components exist ──────────────
file.exists(file) is not TRUE

`actual`:   FALSE
`expected`: TRUE 
Missing file: report3.R
── Failure ('test-launch_zzedc.R:60:5'): key app components exist ──────────────
file.exists(file) is not TRUE

`actual`:   FALSE
`expected`: TRUE 
Missing file: data.R
── Failure ('test-launch_zzedc.R:60:5'): key app components exist ──────────────
file.exists(file) is not TRUE

`actual`:   FALSE
`expected`: TRUE 
Missing file: export.R
── Failure ('test-launch_zzedc.R:66:3'): forms directory structure exists ──────
dir.exists("forms") is not TRUE

`actual`:   FALSE
`expected`: TRUE 
── Failure ('test-launch_zzedc.R:70:5'): forms directory structure exists ──────
file.exists(file) is not TRUE

`actual`:   FALSE
`expected`: TRUE 
Missing forms file: forms/blfieldlist.R
── Failure ('test-launch_zzedc.R:70:5'): forms directory structure exists ──────
file.exists(file) is not TRUE

`actual`:   FALSE
`expected`: TRUE 
Missing forms file: forms/renderpanels.R
── Failure ('test-launch_zzedc.R:70:5'): forms directory structure exists ──────
file.exists(file) is not TRUE

`actual`:   FALSE
`expected`: TRUE 
Missing forms file: forms/save.R
── Failure ('test-launch_zzedc.R:76:3'): www directory and assets exist ────────
dir.exists("www") is not TRUE

`actual`:   FALSE
`expected`: TRUE 
── Failure ('test-launch_zzedc.R:81:5'): www directory and assets exist ────────
file.exists(file) is not TRUE

`actual`:   FALSE
`expected`: TRUE 
Missing www file: www/style.css
── Error ('test-quality-dashboard.R:4:3'): quality_dashboard_ui returns UI structure ──
Error in `quality_dashboard_ui("test")`: could not find function "quality_dashboard_ui"
── Error ('test-quality-dashboard.R:10:3'): quality_dashboard_ui includes key metric cards ──
Error in `quality_dashboard_ui("test")`: could not find function "quality_dashboard_ui"
── Error ('test-quality-dashboard.R:20:3'): quality_dashboard_ui includes charts ──
Error in `quality_dashboard_ui("test")`: could not find function "quality_dashboard_ui"
── Error ('test-quality-dashboard.R:29:3'): quality_dashboard_ui includes QC flags section ──
Error in `quality_dashboard_ui("test")`: could not find function "quality_dashboard_ui"
── Error ('test-quality-dashboard.R:39:3'): quality_dashboard_ui has proper namespacing ──
Error in `quality_dashboard_ui("dashboard")`: could not find function "quality_dashboard_ui"
── Error ('test-quality-dashboard.R:47:3'): quality_dashboard_ui metric cards use appropriate styling ──
Error in `quality_dashboard_ui("test")`: could not find function "quality_dashboard_ui"
── Error ('test-quality-dashboard.R:60:3'): quality_dashboard_ui renders with empty namespace ──
Error in `quality_dashboard_ui("")`: could not find function "quality_dashboard_ui"
── Error ('test-quality-dashboard.R:66:3'): quality_dashboard_ui includes responsive design ──
Error in `quality_dashboard_ui("test")`: could not find function "quality_dashboard_ui"
── Error ('test-quality-dashboard.R:74:3'): quality_dashboard_ui includes help text ──
Error in `quality_dashboard_ui("test")`: could not find function "quality_dashboard_ui"
── Error ('test-quality-dashboard.R:84:3'): quality_dashboard_ui has correct card structure ──
Error in `quality_dashboard_ui("test")`: could not find function "quality_dashboard_ui"
── Error ('test-quality-dashboard.R:93:3'): quality_dashboard_ui includes table output ──
Error in `quality_dashboard_ui("test")`: could not find function "quality_dashboard_ui"
── Error ('test-quality-dashboard.R:100:3'): quality_dashboard_ui includes plotly charts ──
Error in `quality_dashboard_ui("test")`: could not find function "quality_dashboard_ui"
── Error ('test-quality-dashboard.R:109:3'): quality_dashboard_ui includes descriptive headings ──
Error in `quality_dashboard_ui("test")`: could not find function "quality_dashboard_ui"
── Error ('test-quality-dashboard.R:116:3'): quality_dashboard_ui includes icon references ──
Error in `quality_dashboard_ui("test")`: could not find function "quality_dashboard_ui"
── Error ('test-quality-dashboard.R:126:3'): quality_dashboard_ui uses color coding for status ──
Error in `quality_dashboard_ui("test")`: could not find function "quality_dashboard_ui"

[ FAIL 63 | WARN 35 | SKIP 5 | PASS 341 ]
Error: Test failures
In addition: Warning message:
call dbDisconnect() when finished working with a connection 
Execution halted
