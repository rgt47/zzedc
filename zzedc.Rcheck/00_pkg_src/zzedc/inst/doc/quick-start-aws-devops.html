<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />



<title>Quick Start: AWS/DevOps (Config File Setup)</title>

<script>// Pandoc 2.9 adds attributes on both header and div. We remove the former (to
// be compatible with the behavior of Pandoc < 2.8).
document.addEventListener('DOMContentLoaded', function(e) {
  var hs = document.querySelectorAll("div.section[class*='level'] > :first-child");
  var i, h, a;
  for (i = 0; i < hs.length; i++) {
    h = hs[i];
    if (!/^h[1-6]$/i.test(h.tagName)) continue;  // it should be a header h1-h6
    a = h.attributes;
    while (a.length > 0) h.removeAttribute(a[0].name);
  }
});
</script>

<style type="text/css">
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
</style>



<style type="text/css">
code {
white-space: pre;
}
.sourceCode {
overflow: visible;
}
</style>
<style type="text/css" data-origin="pandoc">
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
{ counter-reset: source-line 0; }
pre.numberSource code > span
{ position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
{ content: counter(source-line);
position: relative; left: -1em; text-align: right; vertical-align: baseline;
border: none; display: inline-block;
-webkit-touch-callout: none; -webkit-user-select: none;
-khtml-user-select: none; -moz-user-select: none;
-ms-user-select: none; user-select: none;
padding: 0 4px; width: 4em;
color: #aaaaaa;
}
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa; padding-left: 4px; }
div.sourceCode
{ }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } 
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.at { color: #7d9029; } 
code span.bn { color: #40a070; } 
code span.bu { color: #008000; } 
code span.cf { color: #007020; font-weight: bold; } 
code span.ch { color: #4070a0; } 
code span.cn { color: #880000; } 
code span.co { color: #60a0b0; font-style: italic; } 
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.do { color: #ba2121; font-style: italic; } 
code span.dt { color: #902000; } 
code span.dv { color: #40a070; } 
code span.er { color: #ff0000; font-weight: bold; } 
code span.ex { } 
code span.fl { color: #40a070; } 
code span.fu { color: #06287e; } 
code span.im { color: #008000; font-weight: bold; } 
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.kw { color: #007020; font-weight: bold; } 
code span.op { color: #666666; } 
code span.ot { color: #007020; } 
code span.pp { color: #bc7a00; } 
code span.sc { color: #4070a0; } 
code span.ss { color: #bb6688; } 
code span.st { color: #4070a0; } 
code span.va { color: #19177c; } 
code span.vs { color: #4070a0; } 
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } 
</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    var j = 0;
    while (j < rules.length) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") {
        j++;
        continue;
      }
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') {
        j++;
        continue;
      }
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>




<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; } 
code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>




</head>

<body>




<h1 class="title toc-ignore">Quick Start: AWS/DevOps (Config File
Setup)</h1>



<div id="zzedc-setup-for-awsdevops-config-file-method" class="section level1">
<h1>ZZedc Setup for AWS/DevOps (Config File Method)</h1>
<p>Deploying ZZedc to AWS or using container orchestration? This guide
covers automated, non-interactive setup using configuration files.</p>
<p><strong>Time estimate: 5-10 minutes (after infrastructure
provisioning)</strong></p>
<hr />
<div id="prerequisites" class="section level2">
<h2>Prerequisites</h2>
<ul>
<li>AWS EC2 instance or similar server provisioned</li>
<li>R 4.0+ installed on server</li>
<li>SSH access to server</li>
<li>ZZedc package installed: <code>install.packages(&quot;zzedc&quot;)</code></li>
<li>(Optional) Docker / container orchestration running</li>
</ul>
<hr />
</div>
<div id="quick-start-3-steps" class="section level2">
<h2>Quick Start: 3 Steps</h2>
<div id="step-1-create-configuration-file" class="section level3">
<h3>Step 1: Create Configuration File</h3>
<p>Create <code>zzedc_config.yml</code> on your server:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="co"># Study configuration</span></span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="fu">study</span><span class="kw">:</span></span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a><span class="at">  </span><span class="fu">name</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;Multi-Site Stroke Trial&quot;</span></span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a><span class="at">  </span><span class="fu">protocol_id</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;STROKE-2024-100&quot;</span></span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a><span class="at">  </span><span class="fu">pi_name</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;Dr. James Wilson&quot;</span></span>
<span id="cb1-6"><a href="#cb1-6" tabindex="-1"></a><span class="at">  </span><span class="fu">pi_email</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;jwilson@ucsd.edu&quot;</span></span>
<span id="cb1-7"><a href="#cb1-7" tabindex="-1"></a><span class="at">  </span><span class="fu">target_enrollment</span><span class="kw">:</span><span class="at"> </span><span class="dv">500</span></span>
<span id="cb1-8"><a href="#cb1-8" tabindex="-1"></a><span class="at">  </span><span class="fu">phase</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;Phase3&quot;</span></span>
<span id="cb1-9"><a href="#cb1-9" tabindex="-1"></a></span>
<span id="cb1-10"><a href="#cb1-10" tabindex="-1"></a><span class="co"># Administrator account</span></span>
<span id="cb1-11"><a href="#cb1-11" tabindex="-1"></a><span class="fu">admin</span><span class="kw">:</span></span>
<span id="cb1-12"><a href="#cb1-12" tabindex="-1"></a><span class="at">  </span><span class="fu">username</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;trial_admin&quot;</span></span>
<span id="cb1-13"><a href="#cb1-13" tabindex="-1"></a><span class="at">  </span><span class="fu">fullname</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;Trial Administrator&quot;</span></span>
<span id="cb1-14"><a href="#cb1-14" tabindex="-1"></a><span class="at">  </span><span class="fu">email</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;admin@trial-site.org&quot;</span></span>
<span id="cb1-15"><a href="#cb1-15" tabindex="-1"></a><span class="at">  </span><span class="fu">password</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;SecureAWSPassword123!@#&quot;</span></span>
<span id="cb1-16"><a href="#cb1-16" tabindex="-1"></a></span>
<span id="cb1-17"><a href="#cb1-17" tabindex="-1"></a><span class="co"># Security settings</span></span>
<span id="cb1-18"><a href="#cb1-18" tabindex="-1"></a><span class="fu">security</span><span class="kw">:</span></span>
<span id="cb1-19"><a href="#cb1-19" tabindex="-1"></a><span class="at">  </span><span class="fu">session_timeout_minutes</span><span class="kw">:</span><span class="at"> </span><span class="dv">30</span></span>
<span id="cb1-20"><a href="#cb1-20" tabindex="-1"></a><span class="at">  </span><span class="fu">enforce_https</span><span class="kw">:</span><span class="at"> </span><span class="ch">true</span></span>
<span id="cb1-21"><a href="#cb1-21" tabindex="-1"></a><span class="at">  </span><span class="fu">max_failed_login_attempts</span><span class="kw">:</span><span class="at"> </span><span class="dv">3</span></span>
<span id="cb1-22"><a href="#cb1-22" tabindex="-1"></a></span>
<span id="cb1-23"><a href="#cb1-23" tabindex="-1"></a><span class="co"># Compliance</span></span>
<span id="cb1-24"><a href="#cb1-24" tabindex="-1"></a><span class="fu">compliance</span><span class="kw">:</span></span>
<span id="cb1-25"><a href="#cb1-25" tabindex="-1"></a><span class="at">  </span><span class="fu">gdpr_enabled</span><span class="kw">:</span><span class="at"> </span><span class="ch">true</span></span>
<span id="cb1-26"><a href="#cb1-26" tabindex="-1"></a><span class="at">  </span><span class="fu">cfr_part11_enabled</span><span class="kw">:</span><span class="at"> </span><span class="ch">true</span></span>
<span id="cb1-27"><a href="#cb1-27" tabindex="-1"></a><span class="at">  </span><span class="fu">audit_logging_enabled</span><span class="kw">:</span><span class="at"> </span><span class="ch">true</span></span></code></pre></div>
</div>
<div id="step-2-run-initialization" class="section level3">
<h3>Step 2: Run Initialization</h3>
<p>SSH into server and execute:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="bu">cd</span> /srv/zzedc  <span class="co"># Your project directory</span></span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a></span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a><span class="ex">Rscript</span> <span class="at">-e</span> <span class="st">&quot;</span></span>
<span id="cb2-4"><a href="#cb2-4" tabindex="-1"></a><span class="st">  library(zzedc)</span></span>
<span id="cb2-5"><a href="#cb2-5" tabindex="-1"></a><span class="st">  zzedc::init(mode = &#39;config&#39;, config_file = &#39;zzedc_config.yml&#39;)</span></span>
<span id="cb2-6"><a href="#cb2-6" tabindex="-1"></a><span class="st">&quot;</span></span></code></pre></div>
</div>
<div id="step-3-set-environment-launch" class="section level3">
<h3>Step 3: Set Environment &amp; Launch</h3>
<div class="sourceCode" id="cb3"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="co"># Set the security salt (from setup output)</span></span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a><span class="bu">export</span> <span class="va">ZZEDC_SALT</span><span class="op">=</span><span class="st">&#39;[generated_salt_from_setup]&#39;</span></span>
<span id="cb3-3"><a href="#cb3-3" tabindex="-1"></a></span>
<span id="cb3-4"><a href="#cb3-4" tabindex="-1"></a><span class="co"># Start the application</span></span>
<span id="cb3-5"><a href="#cb3-5" tabindex="-1"></a><span class="ex">R</span> CMD BATCH launch_app.R</span>
<span id="cb3-6"><a href="#cb3-6" tabindex="-1"></a></span>
<span id="cb3-7"><a href="#cb3-7" tabindex="-1"></a><span class="co"># Or with nohup for background execution</span></span>
<span id="cb3-8"><a href="#cb3-8" tabindex="-1"></a><span class="fu">nohup</span> Rscript launch_app.R <span class="op">&gt;</span> zzedc.log <span class="dv">2</span><span class="op">&gt;&amp;</span><span class="dv">1</span> <span class="kw">&amp;</span></span></code></pre></div>
<p><strong>Done!</strong> Access at
<code>https://your-server:3838</code></p>
<hr />
</div>
</div>
<div id="detailed-configuration-reference" class="section level2">
<h2>Detailed Configuration Reference</h2>
<div id="study-section" class="section level3">
<h3>Study Section</h3>
<div class="sourceCode" id="cb4"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="fu">study</span><span class="kw">:</span></span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a><span class="co">  # Official study name (required)</span></span>
<span id="cb4-3"><a href="#cb4-3" tabindex="-1"></a><span class="at">  </span><span class="fu">name</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;Study Name&quot;</span></span>
<span id="cb4-4"><a href="#cb4-4" tabindex="-1"></a></span>
<span id="cb4-5"><a href="#cb4-5" tabindex="-1"></a><span class="co">  # Protocol/study code (required)</span></span>
<span id="cb4-6"><a href="#cb4-6" tabindex="-1"></a><span class="at">  </span><span class="fu">protocol_id</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;PROTOCOL-001&quot;</span></span>
<span id="cb4-7"><a href="#cb4-7" tabindex="-1"></a></span>
<span id="cb4-8"><a href="#cb4-8" tabindex="-1"></a><span class="co">  # PI information (required)</span></span>
<span id="cb4-9"><a href="#cb4-9" tabindex="-1"></a><span class="at">  </span><span class="fu">pi_name</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;Dr. Name&quot;</span></span>
<span id="cb4-10"><a href="#cb4-10" tabindex="-1"></a><span class="at">  </span><span class="fu">pi_email</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;pi@institution.edu&quot;</span></span>
<span id="cb4-11"><a href="#cb4-11" tabindex="-1"></a></span>
<span id="cb4-12"><a href="#cb4-12" tabindex="-1"></a><span class="co">  # Target enrollment (required)</span></span>
<span id="cb4-13"><a href="#cb4-13" tabindex="-1"></a><span class="at">  </span><span class="fu">target_enrollment</span><span class="kw">:</span><span class="at"> </span><span class="dv">500</span></span>
<span id="cb4-14"><a href="#cb4-14" tabindex="-1"></a></span>
<span id="cb4-15"><a href="#cb4-15" tabindex="-1"></a><span class="co">  # Study phase (optional, default: &quot;Pilot&quot;)</span></span>
<span id="cb4-16"><a href="#cb4-16" tabindex="-1"></a><span class="co">  # Options: Pilot, Phase1, Phase2, Phase3, Phase4, Observational</span></span>
<span id="cb4-17"><a href="#cb4-17" tabindex="-1"></a><span class="at">  </span><span class="fu">phase</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;Phase3&quot;</span></span></code></pre></div>
</div>
<div id="admin-section" class="section level3">
<h3>Admin Section</h3>
<div class="sourceCode" id="cb5"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="fu">admin</span><span class="kw">:</span></span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a><span class="co">  # System administrator username (required)</span></span>
<span id="cb5-3"><a href="#cb5-3" tabindex="-1"></a><span class="co">  # No spaces, alphanumeric recommended</span></span>
<span id="cb5-4"><a href="#cb5-4" tabindex="-1"></a><span class="at">  </span><span class="fu">username</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;admin_user&quot;</span></span>
<span id="cb5-5"><a href="#cb5-5" tabindex="-1"></a></span>
<span id="cb5-6"><a href="#cb5-6" tabindex="-1"></a><span class="co">  # Full name (optional)</span></span>
<span id="cb5-7"><a href="#cb5-7" tabindex="-1"></a><span class="at">  </span><span class="fu">fullname</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;Administrator Name&quot;</span></span>
<span id="cb5-8"><a href="#cb5-8" tabindex="-1"></a></span>
<span id="cb5-9"><a href="#cb5-9" tabindex="-1"></a><span class="co">  # Email address (optional)</span></span>
<span id="cb5-10"><a href="#cb5-10" tabindex="-1"></a><span class="at">  </span><span class="fu">email</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;admin@organization.org&quot;</span></span>
<span id="cb5-11"><a href="#cb5-11" tabindex="-1"></a></span>
<span id="cb5-12"><a href="#cb5-12" tabindex="-1"></a><span class="co">  # Initial password (required)</span></span>
<span id="cb5-13"><a href="#cb5-13" tabindex="-1"></a><span class="co">  # Minimum 8 characters</span></span>
<span id="cb5-14"><a href="#cb5-14" tabindex="-1"></a><span class="co">  # This will be hashed immediately</span></span>
<span id="cb5-15"><a href="#cb5-15" tabindex="-1"></a><span class="at">  </span><span class="fu">password</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;SecurePassword123!&quot;</span></span></code></pre></div>
</div>
<div id="security-section" class="section level3">
<h3>Security Section</h3>
<div class="sourceCode" id="cb6"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="fu">security</span><span class="kw">:</span></span>
<span id="cb6-2"><a href="#cb6-2" tabindex="-1"></a><span class="co">  # Session timeout in minutes</span></span>
<span id="cb6-3"><a href="#cb6-3" tabindex="-1"></a><span class="co">  # Default: 30</span></span>
<span id="cb6-4"><a href="#cb6-4" tabindex="-1"></a><span class="at">  </span><span class="fu">session_timeout_minutes</span><span class="kw">:</span><span class="at"> </span><span class="dv">30</span></span>
<span id="cb6-5"><a href="#cb6-5" tabindex="-1"></a></span>
<span id="cb6-6"><a href="#cb6-6" tabindex="-1"></a><span class="co">  # Enforce HTTPS</span></span>
<span id="cb6-7"><a href="#cb6-7" tabindex="-1"></a><span class="co">  # true = production (requires SSL)</span></span>
<span id="cb6-8"><a href="#cb6-8" tabindex="-1"></a><span class="co">  # false = development/testing</span></span>
<span id="cb6-9"><a href="#cb6-9" tabindex="-1"></a><span class="co">  # Default: true</span></span>
<span id="cb6-10"><a href="#cb6-10" tabindex="-1"></a><span class="at">  </span><span class="fu">enforce_https</span><span class="kw">:</span><span class="at"> </span><span class="ch">true</span></span>
<span id="cb6-11"><a href="#cb6-11" tabindex="-1"></a></span>
<span id="cb6-12"><a href="#cb6-12" tabindex="-1"></a><span class="co">  # Max failed login attempts before lockout</span></span>
<span id="cb6-13"><a href="#cb6-13" tabindex="-1"></a><span class="co">  # Default: 3</span></span>
<span id="cb6-14"><a href="#cb6-14" tabindex="-1"></a><span class="at">  </span><span class="fu">max_failed_login_attempts</span><span class="kw">:</span><span class="at"> </span><span class="dv">3</span></span></code></pre></div>
</div>
<div id="compliance-section-optional" class="section level3">
<h3>Compliance Section (Optional)</h3>
<div class="sourceCode" id="cb7"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="fu">compliance</span><span class="kw">:</span></span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a><span class="co">  # GDPR compliance features</span></span>
<span id="cb7-3"><a href="#cb7-3" tabindex="-1"></a><span class="co">  # Default: true</span></span>
<span id="cb7-4"><a href="#cb7-4" tabindex="-1"></a><span class="at">  </span><span class="fu">gdpr_enabled</span><span class="kw">:</span><span class="at"> </span><span class="ch">true</span></span>
<span id="cb7-5"><a href="#cb7-5" tabindex="-1"></a></span>
<span id="cb7-6"><a href="#cb7-6" tabindex="-1"></a><span class="co">  # 21 CFR Part 11 (FDA)</span></span>
<span id="cb7-7"><a href="#cb7-7" tabindex="-1"></a><span class="co">  # Default: true</span></span>
<span id="cb7-8"><a href="#cb7-8" tabindex="-1"></a><span class="at">  </span><span class="fu">cfr_part11_enabled</span><span class="kw">:</span><span class="at"> </span><span class="ch">true</span></span>
<span id="cb7-9"><a href="#cb7-9" tabindex="-1"></a></span>
<span id="cb7-10"><a href="#cb7-10" tabindex="-1"></a><span class="co">  # Comprehensive audit logging</span></span>
<span id="cb7-11"><a href="#cb7-11" tabindex="-1"></a><span class="co">  # Default: true</span></span>
<span id="cb7-12"><a href="#cb7-12" tabindex="-1"></a><span class="at">  </span><span class="fu">audit_logging_enabled</span><span class="kw">:</span><span class="at"> </span><span class="ch">true</span></span></code></pre></div>
</div>
<div id="database-section-optional" class="section level3">
<h3>Database Section (Optional)</h3>
<div class="sourceCode" id="cb8"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="fu">database</span><span class="kw">:</span></span>
<span id="cb8-2"><a href="#cb8-2" tabindex="-1"></a><span class="co">  # Database type</span></span>
<span id="cb8-3"><a href="#cb8-3" tabindex="-1"></a><span class="co">  # Currently only &quot;sqlite&quot; supported</span></span>
<span id="cb8-4"><a href="#cb8-4" tabindex="-1"></a><span class="at">  </span><span class="fu">type</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;sqlite&quot;</span></span>
<span id="cb8-5"><a href="#cb8-5" tabindex="-1"></a></span>
<span id="cb8-6"><a href="#cb8-6" tabindex="-1"></a><span class="co">  # Connection pool size</span></span>
<span id="cb8-7"><a href="#cb8-7" tabindex="-1"></a><span class="co">  # Default: 5</span></span>
<span id="cb8-8"><a href="#cb8-8" tabindex="-1"></a><span class="at">  </span><span class="fu">pool_size</span><span class="kw">:</span><span class="at"> </span><span class="dv">5</span></span></code></pre></div>
<hr />
</div>
</div>
<div id="docker-deployment" class="section level2">
<h2>Docker Deployment</h2>
<div id="dockerfile-example" class="section level3">
<h3>Dockerfile Example</h3>
<div class="sourceCode" id="cb9"><pre class="sourceCode dockerfile"><code class="sourceCode dockerfile"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="kw">FROM</span> rocker/r-ubuntu:4.3</span>
<span id="cb9-2"><a href="#cb9-2" tabindex="-1"></a></span>
<span id="cb9-3"><a href="#cb9-3" tabindex="-1"></a><span class="co"># Install R packages</span></span>
<span id="cb9-4"><a href="#cb9-4" tabindex="-1"></a><span class="kw">RUN</span> <span class="ex">apt-get</span> update <span class="kw">&amp;&amp;</span> <span class="dt">\</span></span>
<span id="cb9-5"><a href="#cb9-5" tabindex="-1"></a>    <span class="ex">apt-get</span> install <span class="at">-y</span> r-cran-shiny r-cran-yaml <span class="kw">&amp;&amp;</span> <span class="dt">\</span></span>
<span id="cb9-6"><a href="#cb9-6" tabindex="-1"></a>    <span class="ex">Rscript</span> <span class="at">-e</span> <span class="st">&quot;install.packages(&#39;zzedc&#39;)&quot;</span></span>
<span id="cb9-7"><a href="#cb9-7" tabindex="-1"></a></span>
<span id="cb9-8"><a href="#cb9-8" tabindex="-1"></a><span class="co"># Copy configuration</span></span>
<span id="cb9-9"><a href="#cb9-9" tabindex="-1"></a><span class="kw">COPY</span> zzedc_config.yml /app/zzedc_config.yml</span>
<span id="cb9-10"><a href="#cb9-10" tabindex="-1"></a><span class="kw">COPY</span> entrypoint.sh /app/entrypoint.sh</span>
<span id="cb9-11"><a href="#cb9-11" tabindex="-1"></a></span>
<span id="cb9-12"><a href="#cb9-12" tabindex="-1"></a><span class="kw">WORKDIR</span> /app</span>
<span id="cb9-13"><a href="#cb9-13" tabindex="-1"></a></span>
<span id="cb9-14"><a href="#cb9-14" tabindex="-1"></a><span class="co"># Create data directory</span></span>
<span id="cb9-15"><a href="#cb9-15" tabindex="-1"></a><span class="kw">RUN</span> <span class="fu">mkdir</span> <span class="at">-p</span> data logs backups</span>
<span id="cb9-16"><a href="#cb9-16" tabindex="-1"></a></span>
<span id="cb9-17"><a href="#cb9-17" tabindex="-1"></a><span class="co"># Expose port</span></span>
<span id="cb9-18"><a href="#cb9-18" tabindex="-1"></a><span class="kw">EXPOSE</span> 3838</span>
<span id="cb9-19"><a href="#cb9-19" tabindex="-1"></a></span>
<span id="cb9-20"><a href="#cb9-20" tabindex="-1"></a><span class="co"># Set environment</span></span>
<span id="cb9-21"><a href="#cb9-21" tabindex="-1"></a><span class="kw">ENV</span> ZZEDC_SALT=<span class="st">&quot;&quot;</span></span>
<span id="cb9-22"><a href="#cb9-22" tabindex="-1"></a></span>
<span id="cb9-23"><a href="#cb9-23" tabindex="-1"></a><span class="co"># Run entry point</span></span>
<span id="cb9-24"><a href="#cb9-24" tabindex="-1"></a><span class="kw">CMD</span> [<span class="st">&quot;/app/entrypoint.sh&quot;</span>]</span></code></pre></div>
</div>
<div id="docker-entrypoint-script" class="section level3">
<h3>Docker Entrypoint Script</h3>
<div class="sourceCode" id="cb10"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a><span class="co">#!/bin/bash</span></span>
<span id="cb10-2"><a href="#cb10-2" tabindex="-1"></a><span class="co"># entrypoint.sh</span></span>
<span id="cb10-3"><a href="#cb10-3" tabindex="-1"></a></span>
<span id="cb10-4"><a href="#cb10-4" tabindex="-1"></a><span class="bu">set</span> <span class="at">-e</span></span>
<span id="cb10-5"><a href="#cb10-5" tabindex="-1"></a></span>
<span id="cb10-6"><a href="#cb10-6" tabindex="-1"></a><span class="co"># Initialize ZZedc from config</span></span>
<span id="cb10-7"><a href="#cb10-7" tabindex="-1"></a><span class="bu">echo</span> <span class="st">&quot;Initializing ZZedc...&quot;</span></span>
<span id="cb10-8"><a href="#cb10-8" tabindex="-1"></a><span class="ex">Rscript</span> <span class="at">-e</span> <span class="st">&quot;</span></span>
<span id="cb10-9"><a href="#cb10-9" tabindex="-1"></a><span class="st">  library(zzedc)</span></span>
<span id="cb10-10"><a href="#cb10-10" tabindex="-1"></a><span class="st">  result &lt;- zzedc::init(mode = &#39;config&#39;, config_file = &#39;/app/zzedc_config.yml&#39;)</span></span>
<span id="cb10-11"><a href="#cb10-11" tabindex="-1"></a><span class="st">  if (!result</span><span class="dt">\$</span><span class="st">success) {</span></span>
<span id="cb10-12"><a href="#cb10-12" tabindex="-1"></a><span class="st">    stop(&#39;Failed to initialize ZZedc&#39;)</span></span>
<span id="cb10-13"><a href="#cb10-13" tabindex="-1"></a><span class="st">  }</span></span>
<span id="cb10-14"><a href="#cb10-14" tabindex="-1"></a><span class="st">&quot;</span></span>
<span id="cb10-15"><a href="#cb10-15" tabindex="-1"></a></span>
<span id="cb10-16"><a href="#cb10-16" tabindex="-1"></a><span class="co"># Set ZZEDC_SALT from setup result or environment</span></span>
<span id="cb10-17"><a href="#cb10-17" tabindex="-1"></a><span class="cf">if</span> <span class="bu">[</span> <span class="ot">-z</span> <span class="dt">\&quot;\$</span>ZZEDC_SALT<span class="dt">\&quot;</span> <span class="bu">]</span><span class="kw">;</span> <span class="cf">then</span></span>
<span id="cb10-18"><a href="#cb10-18" tabindex="-1"></a>  <span class="va">ZZEDC_SALT</span><span class="op">=</span><span class="dt">\$</span><span class="kw">(</span><span class="fu">grep</span> <span class="st">&#39;^ZZEDC_SALT=&#39;</span> .env <span class="kw">|</span> <span class="fu">cut</span> <span class="at">-d</span> <span class="st">&#39;=&#39;</span> <span class="at">-f</span> 2<span class="kw">)</span></span>
<span id="cb10-19"><a href="#cb10-19" tabindex="-1"></a><span class="cf">fi</span></span>
<span id="cb10-20"><a href="#cb10-20" tabindex="-1"></a></span>
<span id="cb10-21"><a href="#cb10-21" tabindex="-1"></a><span class="bu">export</span> <span class="va">ZZEDC_SALT</span></span>
<span id="cb10-22"><a href="#cb10-22" tabindex="-1"></a></span>
<span id="cb10-23"><a href="#cb10-23" tabindex="-1"></a><span class="co"># Launch application</span></span>
<span id="cb10-24"><a href="#cb10-24" tabindex="-1"></a><span class="bu">echo</span> <span class="st">&quot;Launching ZZedc on port 3838...&quot;</span></span>
<span id="cb10-25"><a href="#cb10-25" tabindex="-1"></a><span class="bu">exec</span> Rscript launch_app.R</span></code></pre></div>
</div>
<div id="docker-compose-example" class="section level3">
<h3>Docker Compose Example</h3>
<div class="sourceCode" id="cb11"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a><span class="fu">version</span><span class="kw">:</span><span class="at"> </span><span class="st">&#39;3.8&#39;</span></span>
<span id="cb11-2"><a href="#cb11-2" tabindex="-1"></a></span>
<span id="cb11-3"><a href="#cb11-3" tabindex="-1"></a><span class="fu">services</span><span class="kw">:</span></span>
<span id="cb11-4"><a href="#cb11-4" tabindex="-1"></a><span class="at">  </span><span class="fu">zzedc</span><span class="kw">:</span></span>
<span id="cb11-5"><a href="#cb11-5" tabindex="-1"></a><span class="at">    </span><span class="fu">build</span><span class="kw">:</span><span class="at"> .</span></span>
<span id="cb11-6"><a href="#cb11-6" tabindex="-1"></a><span class="at">    </span><span class="fu">ports</span><span class="kw">:</span></span>
<span id="cb11-7"><a href="#cb11-7" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="st">&quot;3838:3838&quot;</span></span>
<span id="cb11-8"><a href="#cb11-8" tabindex="-1"></a><span class="at">    </span><span class="fu">volumes</span><span class="kw">:</span></span>
<span id="cb11-9"><a href="#cb11-9" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> ./data:/app/data</span></span>
<span id="cb11-10"><a href="#cb11-10" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> ./backups:/app/backups</span></span>
<span id="cb11-11"><a href="#cb11-11" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> ./logs:/app/logs</span></span>
<span id="cb11-12"><a href="#cb11-12" tabindex="-1"></a><span class="at">    </span><span class="fu">environment</span><span class="kw">:</span></span>
<span id="cb11-13"><a href="#cb11-13" tabindex="-1"></a><span class="at">      </span><span class="fu">ZZEDC_SALT</span><span class="kw">:</span><span class="at"> ${ZZEDC_SALT}</span></span>
<span id="cb11-14"><a href="#cb11-14" tabindex="-1"></a><span class="at">    </span><span class="fu">restart</span><span class="kw">:</span><span class="at"> always</span></span>
<span id="cb11-15"><a href="#cb11-15" tabindex="-1"></a><span class="at">    </span><span class="fu">networks</span><span class="kw">:</span></span>
<span id="cb11-16"><a href="#cb11-16" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> zzedc-network</span></span>
<span id="cb11-17"><a href="#cb11-17" tabindex="-1"></a></span>
<span id="cb11-18"><a href="#cb11-18" tabindex="-1"></a><span class="fu">networks</span><span class="kw">:</span></span>
<span id="cb11-19"><a href="#cb11-19" tabindex="-1"></a><span class="at">  </span><span class="fu">zzedc-network</span><span class="kw">:</span></span>
<span id="cb11-20"><a href="#cb11-20" tabindex="-1"></a><span class="at">    </span><span class="fu">driver</span><span class="kw">:</span><span class="at"> bridge</span></span></code></pre></div>
</div>
<div id="deploy-with-docker" class="section level3">
<h3>Deploy with Docker</h3>
<div class="sourceCode" id="cb12"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a><span class="co"># 1. Create .env with generated salt</span></span>
<span id="cb12-2"><a href="#cb12-2" tabindex="-1"></a><span class="bu">echo</span> <span class="st">&quot;ZZEDC_SALT=a7f9e2c4d1b3f8a6e9d2c5b8f1a4e7d0&quot;</span> <span class="op">&gt;</span> .env</span>
<span id="cb12-3"><a href="#cb12-3" tabindex="-1"></a></span>
<span id="cb12-4"><a href="#cb12-4" tabindex="-1"></a><span class="co"># 2. Build and start</span></span>
<span id="cb12-5"><a href="#cb12-5" tabindex="-1"></a><span class="ex">docker-compose</span> up <span class="at">-d</span></span>
<span id="cb12-6"><a href="#cb12-6" tabindex="-1"></a></span>
<span id="cb12-7"><a href="#cb12-7" tabindex="-1"></a><span class="co"># 3. View logs</span></span>
<span id="cb12-8"><a href="#cb12-8" tabindex="-1"></a><span class="ex">docker-compose</span> logs <span class="at">-f</span> zzedc</span>
<span id="cb12-9"><a href="#cb12-9" tabindex="-1"></a></span>
<span id="cb12-10"><a href="#cb12-10" tabindex="-1"></a><span class="co"># 4. Access</span></span>
<span id="cb12-11"><a href="#cb12-11" tabindex="-1"></a><span class="co"># https://your-server:3838</span></span></code></pre></div>
<hr />
</div>
</div>
<div id="aws-cloudformation-template" class="section level2">
<h2>AWS CloudFormation Template</h2>
<div class="sourceCode" id="cb13"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a><span class="fu">AWSTemplateFormatVersion</span><span class="kw">:</span><span class="at"> </span><span class="st">&#39;2010-09-09&#39;</span></span>
<span id="cb13-2"><a href="#cb13-2" tabindex="-1"></a><span class="fu">Description</span><span class="kw">:</span><span class="at"> </span><span class="st">&#39;ZZedc Multi-Site Clinical Trial Platform&#39;</span></span>
<span id="cb13-3"><a href="#cb13-3" tabindex="-1"></a></span>
<span id="cb13-4"><a href="#cb13-4" tabindex="-1"></a><span class="fu">Parameters</span><span class="kw">:</span></span>
<span id="cb13-5"><a href="#cb13-5" tabindex="-1"></a><span class="at">  </span><span class="fu">InstanceType</span><span class="kw">:</span></span>
<span id="cb13-6"><a href="#cb13-6" tabindex="-1"></a><span class="at">    </span><span class="fu">Type</span><span class="kw">:</span><span class="at"> String</span></span>
<span id="cb13-7"><a href="#cb13-7" tabindex="-1"></a><span class="at">    </span><span class="fu">Default</span><span class="kw">:</span><span class="at"> t3.medium</span></span>
<span id="cb13-8"><a href="#cb13-8" tabindex="-1"></a><span class="at">    </span><span class="fu">AllowedValues</span><span class="kw">:</span></span>
<span id="cb13-9"><a href="#cb13-9" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> t3.small</span></span>
<span id="cb13-10"><a href="#cb13-10" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> t3.medium</span></span>
<span id="cb13-11"><a href="#cb13-11" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> t3.large</span></span>
<span id="cb13-12"><a href="#cb13-12" tabindex="-1"></a></span>
<span id="cb13-13"><a href="#cb13-13" tabindex="-1"></a><span class="at">  </span><span class="fu">StudyName</span><span class="kw">:</span></span>
<span id="cb13-14"><a href="#cb13-14" tabindex="-1"></a><span class="at">    </span><span class="fu">Type</span><span class="kw">:</span><span class="at"> String</span></span>
<span id="cb13-15"><a href="#cb13-15" tabindex="-1"></a><span class="at">    </span><span class="fu">Default</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;My Clinical Trial&quot;</span></span>
<span id="cb13-16"><a href="#cb13-16" tabindex="-1"></a></span>
<span id="cb13-17"><a href="#cb13-17" tabindex="-1"></a><span class="at">  </span><span class="fu">KeyName</span><span class="kw">:</span></span>
<span id="cb13-18"><a href="#cb13-18" tabindex="-1"></a><span class="at">    </span><span class="fu">Type</span><span class="kw">:</span><span class="at"> AWS::EC2::KeyPair::KeyName</span></span>
<span id="cb13-19"><a href="#cb13-19" tabindex="-1"></a></span>
<span id="cb13-20"><a href="#cb13-20" tabindex="-1"></a><span class="fu">Resources</span><span class="kw">:</span></span>
<span id="cb13-21"><a href="#cb13-21" tabindex="-1"></a><span class="at">  </span><span class="fu">ZZedcSecurityGroup</span><span class="kw">:</span></span>
<span id="cb13-22"><a href="#cb13-22" tabindex="-1"></a><span class="at">    </span><span class="fu">Type</span><span class="kw">:</span><span class="at"> AWS::EC2::SecurityGroup</span></span>
<span id="cb13-23"><a href="#cb13-23" tabindex="-1"></a><span class="at">    </span><span class="fu">Properties</span><span class="kw">:</span></span>
<span id="cb13-24"><a href="#cb13-24" tabindex="-1"></a><span class="at">      </span><span class="fu">GroupDescription</span><span class="kw">:</span><span class="at"> Security group for ZZedc</span></span>
<span id="cb13-25"><a href="#cb13-25" tabindex="-1"></a><span class="at">      </span><span class="fu">SecurityGroupIngress</span><span class="kw">:</span></span>
<span id="cb13-26"><a href="#cb13-26" tabindex="-1"></a><span class="at">        </span><span class="kw">-</span><span class="at"> </span><span class="fu">IpProtocol</span><span class="kw">:</span><span class="at"> tcp</span></span>
<span id="cb13-27"><a href="#cb13-27" tabindex="-1"></a><span class="at">          </span><span class="fu">FromPort</span><span class="kw">:</span><span class="at"> </span><span class="dv">443</span></span>
<span id="cb13-28"><a href="#cb13-28" tabindex="-1"></a><span class="at">          </span><span class="fu">ToPort</span><span class="kw">:</span><span class="at"> </span><span class="dv">443</span></span>
<span id="cb13-29"><a href="#cb13-29" tabindex="-1"></a><span class="at">          </span><span class="fu">CidrIp</span><span class="kw">:</span><span class="at"> 0.0.0.0/0</span></span>
<span id="cb13-30"><a href="#cb13-30" tabindex="-1"></a><span class="at">        </span><span class="kw">-</span><span class="at"> </span><span class="fu">IpProtocol</span><span class="kw">:</span><span class="at"> tcp</span></span>
<span id="cb13-31"><a href="#cb13-31" tabindex="-1"></a><span class="at">          </span><span class="fu">FromPort</span><span class="kw">:</span><span class="at"> </span><span class="dv">3838</span></span>
<span id="cb13-32"><a href="#cb13-32" tabindex="-1"></a><span class="at">          </span><span class="fu">ToPort</span><span class="kw">:</span><span class="at"> </span><span class="dv">3838</span></span>
<span id="cb13-33"><a href="#cb13-33" tabindex="-1"></a><span class="at">          </span><span class="fu">CidrIp</span><span class="kw">:</span><span class="at"> 0.0.0.0/0</span></span>
<span id="cb13-34"><a href="#cb13-34" tabindex="-1"></a><span class="at">        </span><span class="kw">-</span><span class="at"> </span><span class="fu">IpProtocol</span><span class="kw">:</span><span class="at"> tcp</span></span>
<span id="cb13-35"><a href="#cb13-35" tabindex="-1"></a><span class="at">          </span><span class="fu">FromPort</span><span class="kw">:</span><span class="at"> </span><span class="dv">22</span></span>
<span id="cb13-36"><a href="#cb13-36" tabindex="-1"></a><span class="at">          </span><span class="fu">ToPort</span><span class="kw">:</span><span class="at"> </span><span class="dv">22</span></span>
<span id="cb13-37"><a href="#cb13-37" tabindex="-1"></a><span class="at">          </span><span class="fu">CidrIp</span><span class="kw">:</span><span class="at"> 0.0.0.0/0</span></span>
<span id="cb13-38"><a href="#cb13-38" tabindex="-1"></a></span>
<span id="cb13-39"><a href="#cb13-39" tabindex="-1"></a><span class="at">  </span><span class="fu">ZZedcInstance</span><span class="kw">:</span></span>
<span id="cb13-40"><a href="#cb13-40" tabindex="-1"></a><span class="at">    </span><span class="fu">Type</span><span class="kw">:</span><span class="at"> AWS::EC2::Instance</span></span>
<span id="cb13-41"><a href="#cb13-41" tabindex="-1"></a><span class="at">    </span><span class="fu">Properties</span><span class="kw">:</span></span>
<span id="cb13-42"><a href="#cb13-42" tabindex="-1"></a><span class="at">      </span><span class="fu">ImageId</span><span class="kw">:</span><span class="at"> ami-0c55b159cbfafe1f0</span><span class="co">  # Amazon Linux 2</span></span>
<span id="cb13-43"><a href="#cb13-43" tabindex="-1"></a><span class="at">      </span><span class="fu">InstanceType</span><span class="kw">:</span><span class="at"> !Ref InstanceType</span></span>
<span id="cb13-44"><a href="#cb13-44" tabindex="-1"></a><span class="at">      </span><span class="fu">KeyName</span><span class="kw">:</span><span class="at"> !Ref KeyName</span></span>
<span id="cb13-45"><a href="#cb13-45" tabindex="-1"></a><span class="at">      </span><span class="fu">SecurityGroupIds</span><span class="kw">:</span></span>
<span id="cb13-46"><a href="#cb13-46" tabindex="-1"></a><span class="at">        </span><span class="kw">-</span><span class="at"> !Ref ZZedcSecurityGroup</span></span>
<span id="cb13-47"><a href="#cb13-47" tabindex="-1"></a><span class="at">      </span><span class="fu">UserData</span><span class="kw">:</span></span>
<span id="cb13-48"><a href="#cb13-48" tabindex="-1"></a><span class="at">        Fn:</span><span class="fu">:Base64</span><span class="kw">:</span><span class="at"> !Sub |</span></span>
<span id="cb13-49"><a href="#cb13-49" tabindex="-1"></a><span class="co">          #!/bin/bash</span></span>
<span id="cb13-50"><a href="#cb13-50" tabindex="-1"></a><span class="at">          set -e</span></span>
<span id="cb13-51"><a href="#cb13-51" tabindex="-1"></a></span>
<span id="cb13-52"><a href="#cb13-52" tabindex="-1"></a><span class="co">          # Update system</span></span>
<span id="cb13-53"><a href="#cb13-53" tabindex="-1"></a><span class="at">          yum update -y</span></span>
<span id="cb13-54"><a href="#cb13-54" tabindex="-1"></a><span class="at">          yum install -y R</span></span>
<span id="cb13-55"><a href="#cb13-55" tabindex="-1"></a></span>
<span id="cb13-56"><a href="#cb13-56" tabindex="-1"></a><span class="co">          # Create directory</span></span>
<span id="cb13-57"><a href="#cb13-57" tabindex="-1"></a><span class="at">          mkdir -p /srv/zzedc</span></span>
<span id="cb13-58"><a href="#cb13-58" tabindex="-1"></a><span class="at">          cd /srv/zzedc</span></span>
<span id="cb13-59"><a href="#cb13-59" tabindex="-1"></a></span>
<span id="cb13-60"><a href="#cb13-60" tabindex="-1"></a><span class="co">          # Install ZZedc</span></span>
<span id="cb13-61"><a href="#cb13-61" tabindex="-1"></a><span class="at">          Rscript -e &quot;install.packages(&#39;zzedc&#39;)&quot;</span></span>
<span id="cb13-62"><a href="#cb13-62" tabindex="-1"></a></span>
<span id="cb13-63"><a href="#cb13-63" tabindex="-1"></a><span class="co">          # Create configuration</span></span>
<span id="cb13-64"><a href="#cb13-64" tabindex="-1"></a><span class="at">          cat &gt; zzedc_config.yml &lt;&lt; &#39;EOF&#39;</span></span>
<span id="cb13-65"><a href="#cb13-65" tabindex="-1"></a><span class="at">          </span><span class="fu">study</span><span class="kw">:</span></span>
<span id="cb13-66"><a href="#cb13-66" tabindex="-1"></a><span class="at">            </span><span class="fu">name</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;${StudyName}&quot;</span></span>
<span id="cb13-67"><a href="#cb13-67" tabindex="-1"></a><span class="at">            </span><span class="fu">protocol_id</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;AWS-2024-001&quot;</span></span>
<span id="cb13-68"><a href="#cb13-68" tabindex="-1"></a><span class="at">            </span><span class="fu">pi_name</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;Trial Administrator&quot;</span></span>
<span id="cb13-69"><a href="#cb13-69" tabindex="-1"></a><span class="at">            </span><span class="fu">pi_email</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;admin@trial.org&quot;</span></span>
<span id="cb13-70"><a href="#cb13-70" tabindex="-1"></a><span class="at">            </span><span class="fu">target_enrollment</span><span class="kw">:</span><span class="at"> </span><span class="dv">500</span></span>
<span id="cb13-71"><a href="#cb13-71" tabindex="-1"></a><span class="at">            </span><span class="fu">phase</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;Phase3&quot;</span></span>
<span id="cb13-72"><a href="#cb13-72" tabindex="-1"></a><span class="at">          </span><span class="fu">admin</span><span class="kw">:</span></span>
<span id="cb13-73"><a href="#cb13-73" tabindex="-1"></a><span class="at">            </span><span class="fu">username</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;admin&quot;</span></span>
<span id="cb13-74"><a href="#cb13-74" tabindex="-1"></a><span class="at">            </span><span class="fu">fullname</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;Administrator&quot;</span></span>
<span id="cb13-75"><a href="#cb13-75" tabindex="-1"></a><span class="at">            </span><span class="fu">email</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;admin@trial.org&quot;</span></span>
<span id="cb13-76"><a href="#cb13-76" tabindex="-1"></a><span class="at">            </span><span class="fu">password</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;ChangeMe123!@#&quot;</span></span>
<span id="cb13-77"><a href="#cb13-77" tabindex="-1"></a><span class="at">          </span><span class="fu">security</span><span class="kw">:</span></span>
<span id="cb13-78"><a href="#cb13-78" tabindex="-1"></a><span class="at">            </span><span class="fu">session_timeout_minutes</span><span class="kw">:</span><span class="at"> </span><span class="dv">30</span></span>
<span id="cb13-79"><a href="#cb13-79" tabindex="-1"></a><span class="at">            </span><span class="fu">enforce_https</span><span class="kw">:</span><span class="at"> </span><span class="ch">true</span></span>
<span id="cb13-80"><a href="#cb13-80" tabindex="-1"></a><span class="at">          </span><span class="fu">compliance</span><span class="kw">:</span></span>
<span id="cb13-81"><a href="#cb13-81" tabindex="-1"></a><span class="at">            </span><span class="fu">gdpr_enabled</span><span class="kw">:</span><span class="at"> </span><span class="ch">true</span></span>
<span id="cb13-82"><a href="#cb13-82" tabindex="-1"></a><span class="at">            </span><span class="fu">cfr_part11_enabled</span><span class="kw">:</span><span class="at"> </span><span class="ch">true</span></span>
<span id="cb13-83"><a href="#cb13-83" tabindex="-1"></a><span class="at">          EOF</span></span>
<span id="cb13-84"><a href="#cb13-84" tabindex="-1"></a></span>
<span id="cb13-85"><a href="#cb13-85" tabindex="-1"></a><span class="co">          # Initialize</span></span>
<span id="cb13-86"><a href="#cb13-86" tabindex="-1"></a><span class="at">          Rscript -e &quot;</span></span>
<span id="cb13-87"><a href="#cb13-87" tabindex="-1"></a><span class="at">            library(zzedc)</span></span>
<span id="cb13-88"><a href="#cb13-88" tabindex="-1"></a><span class="at">            zzedc::init(mode = &#39;config&#39;, config_file = &#39;zzedc_config.yml&#39;)</span></span>
<span id="cb13-89"><a href="#cb13-89" tabindex="-1"></a><span class="at">          </span><span class="st">&quot;</span></span>
<span id="cb13-90"><a href="#cb13-90" tabindex="-1"></a></span>
<span id="cb13-91"><a href="#cb13-91" tabindex="-1"></a><span class="st">          # Start application</span></span>
<span id="cb13-92"><a href="#cb13-92" tabindex="-1"></a><span class="st">          nohup Rscript launch_app.R &gt; zzedc.log 2&gt;&amp;1 &amp;</span></span>
<span id="cb13-93"><a href="#cb13-93" tabindex="-1"></a></span>
<span id="cb13-94"><a href="#cb13-94" tabindex="-1"></a><span class="st">      Tags:</span></span>
<span id="cb13-95"><a href="#cb13-95" tabindex="-1"></a><span class="st">        - Key: Name</span></span>
<span id="cb13-96"><a href="#cb13-96" tabindex="-1"></a><span class="st">          Value: ZZedc-Clinical-Trial</span></span>
<span id="cb13-97"><a href="#cb13-97" tabindex="-1"></a></span>
<span id="cb13-98"><a href="#cb13-98" tabindex="-1"></a><span class="st">Outputs:</span></span>
<span id="cb13-99"><a href="#cb13-99" tabindex="-1"></a><span class="st">  PublicIP:</span></span>
<span id="cb13-100"><a href="#cb13-100" tabindex="-1"></a><span class="st">    Value: !GetAtt ZZedcInstance.PublicIp</span></span>
<span id="cb13-101"><a href="#cb13-101" tabindex="-1"></a><span class="st">    Description: Public IP address of ZZedc instance</span></span>
<span id="cb13-102"><a href="#cb13-102" tabindex="-1"></a></span>
<span id="cb13-103"><a href="#cb13-103" tabindex="-1"></a><span class="st">  AccessURL:</span></span>
<span id="cb13-104"><a href="#cb13-104" tabindex="-1"></a><span class="st">    Value: !Sub &#39;https://${ZZedcInstance.PublicDnsName}:3838&#39;</span></span>
<span id="cb13-105"><a href="#cb13-105" tabindex="-1"></a><span class="st">    Description: URL to access ZZedc</span></span></code></pre></div>
<p>Deploy:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a><span class="ex">aws</span> cloudformation create-stack <span class="dt">\</span></span>
<span id="cb14-2"><a href="#cb14-2" tabindex="-1"></a>  <span class="at">--stack-name</span> zzedc-trial <span class="dt">\</span></span>
<span id="cb14-3"><a href="#cb14-3" tabindex="-1"></a>  <span class="at">--template-body</span> file://cloudformation.yaml <span class="dt">\</span></span>
<span id="cb14-4"><a href="#cb14-4" tabindex="-1"></a>  <span class="at">--parameters</span> ParameterKey=StudyName,ParameterValue=<span class="st">&quot;My Trial&quot;</span> <span class="dt">\</span></span>
<span id="cb14-5"><a href="#cb14-5" tabindex="-1"></a>               ParameterKey=KeyName,ParameterValue=my-key-pair</span></code></pre></div>
<hr />
</div>
<div id="kubernetes-deployment" class="section level2">
<h2>Kubernetes Deployment</h2>
<div id="deployment-manifest" class="section level3">
<h3>Deployment Manifest</h3>
<div class="sourceCode" id="cb15"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a><span class="fu">apiVersion</span><span class="kw">:</span><span class="at"> apps/v1</span></span>
<span id="cb15-2"><a href="#cb15-2" tabindex="-1"></a><span class="fu">kind</span><span class="kw">:</span><span class="at"> Deployment</span></span>
<span id="cb15-3"><a href="#cb15-3" tabindex="-1"></a><span class="fu">metadata</span><span class="kw">:</span></span>
<span id="cb15-4"><a href="#cb15-4" tabindex="-1"></a><span class="at">  </span><span class="fu">name</span><span class="kw">:</span><span class="at"> zzedc</span></span>
<span id="cb15-5"><a href="#cb15-5" tabindex="-1"></a><span class="fu">spec</span><span class="kw">:</span></span>
<span id="cb15-6"><a href="#cb15-6" tabindex="-1"></a><span class="at">  </span><span class="fu">replicas</span><span class="kw">:</span><span class="at"> </span><span class="dv">2</span></span>
<span id="cb15-7"><a href="#cb15-7" tabindex="-1"></a><span class="at">  </span><span class="fu">selector</span><span class="kw">:</span></span>
<span id="cb15-8"><a href="#cb15-8" tabindex="-1"></a><span class="at">    </span><span class="fu">matchLabels</span><span class="kw">:</span></span>
<span id="cb15-9"><a href="#cb15-9" tabindex="-1"></a><span class="at">      </span><span class="fu">app</span><span class="kw">:</span><span class="at"> zzedc</span></span>
<span id="cb15-10"><a href="#cb15-10" tabindex="-1"></a><span class="at">  </span><span class="fu">template</span><span class="kw">:</span></span>
<span id="cb15-11"><a href="#cb15-11" tabindex="-1"></a><span class="at">    </span><span class="fu">metadata</span><span class="kw">:</span></span>
<span id="cb15-12"><a href="#cb15-12" tabindex="-1"></a><span class="at">      </span><span class="fu">labels</span><span class="kw">:</span></span>
<span id="cb15-13"><a href="#cb15-13" tabindex="-1"></a><span class="at">        </span><span class="fu">app</span><span class="kw">:</span><span class="at"> zzedc</span></span>
<span id="cb15-14"><a href="#cb15-14" tabindex="-1"></a><span class="at">    </span><span class="fu">spec</span><span class="kw">:</span></span>
<span id="cb15-15"><a href="#cb15-15" tabindex="-1"></a><span class="at">      </span><span class="fu">containers</span><span class="kw">:</span></span>
<span id="cb15-16"><a href="#cb15-16" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> zzedc</span></span>
<span id="cb15-17"><a href="#cb15-17" tabindex="-1"></a><span class="at">        </span><span class="fu">image</span><span class="kw">:</span><span class="at"> my-registry/zzedc:latest</span></span>
<span id="cb15-18"><a href="#cb15-18" tabindex="-1"></a><span class="at">        </span><span class="fu">ports</span><span class="kw">:</span></span>
<span id="cb15-19"><a href="#cb15-19" tabindex="-1"></a><span class="at">        </span><span class="kw">-</span><span class="at"> </span><span class="fu">containerPort</span><span class="kw">:</span><span class="at"> </span><span class="dv">3838</span></span>
<span id="cb15-20"><a href="#cb15-20" tabindex="-1"></a><span class="at">        </span><span class="fu">env</span><span class="kw">:</span></span>
<span id="cb15-21"><a href="#cb15-21" tabindex="-1"></a><span class="at">        </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> ZZEDC_SALT</span></span>
<span id="cb15-22"><a href="#cb15-22" tabindex="-1"></a><span class="at">          </span><span class="fu">valueFrom</span><span class="kw">:</span></span>
<span id="cb15-23"><a href="#cb15-23" tabindex="-1"></a><span class="at">            </span><span class="fu">secretKeyRef</span><span class="kw">:</span></span>
<span id="cb15-24"><a href="#cb15-24" tabindex="-1"></a><span class="at">              </span><span class="fu">name</span><span class="kw">:</span><span class="at"> zzedc-secrets</span></span>
<span id="cb15-25"><a href="#cb15-25" tabindex="-1"></a><span class="at">              </span><span class="fu">key</span><span class="kw">:</span><span class="at"> salt</span></span>
<span id="cb15-26"><a href="#cb15-26" tabindex="-1"></a><span class="at">        </span><span class="fu">volumeMounts</span><span class="kw">:</span></span>
<span id="cb15-27"><a href="#cb15-27" tabindex="-1"></a><span class="at">        </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> zzedc-data</span></span>
<span id="cb15-28"><a href="#cb15-28" tabindex="-1"></a><span class="at">          </span><span class="fu">mountPath</span><span class="kw">:</span><span class="at"> /app/data</span></span>
<span id="cb15-29"><a href="#cb15-29" tabindex="-1"></a><span class="at">        </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> zzedc-config</span></span>
<span id="cb15-30"><a href="#cb15-30" tabindex="-1"></a><span class="at">          </span><span class="fu">mountPath</span><span class="kw">:</span><span class="at"> /app/config</span></span>
<span id="cb15-31"><a href="#cb15-31" tabindex="-1"></a><span class="at">      </span><span class="fu">volumes</span><span class="kw">:</span></span>
<span id="cb15-32"><a href="#cb15-32" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> zzedc-data</span></span>
<span id="cb15-33"><a href="#cb15-33" tabindex="-1"></a><span class="at">        </span><span class="fu">persistentVolumeClaim</span><span class="kw">:</span></span>
<span id="cb15-34"><a href="#cb15-34" tabindex="-1"></a><span class="at">          </span><span class="fu">claimName</span><span class="kw">:</span><span class="at"> zzedc-data-pvc</span></span>
<span id="cb15-35"><a href="#cb15-35" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> zzedc-config</span></span>
<span id="cb15-36"><a href="#cb15-36" tabindex="-1"></a><span class="at">        </span><span class="fu">configMap</span><span class="kw">:</span></span>
<span id="cb15-37"><a href="#cb15-37" tabindex="-1"></a><span class="at">          </span><span class="fu">name</span><span class="kw">:</span><span class="at"> zzedc-config</span></span>
<span id="cb15-38"><a href="#cb15-38" tabindex="-1"></a></span>
<span id="cb15-39"><a href="#cb15-39" tabindex="-1"></a><span class="pp">---</span></span>
<span id="cb15-40"><a href="#cb15-40" tabindex="-1"></a><span class="fu">apiVersion</span><span class="kw">:</span><span class="at"> v1</span></span>
<span id="cb15-41"><a href="#cb15-41" tabindex="-1"></a><span class="fu">kind</span><span class="kw">:</span><span class="at"> PersistentVolumeClaim</span></span>
<span id="cb15-42"><a href="#cb15-42" tabindex="-1"></a><span class="fu">metadata</span><span class="kw">:</span></span>
<span id="cb15-43"><a href="#cb15-43" tabindex="-1"></a><span class="at">  </span><span class="fu">name</span><span class="kw">:</span><span class="at"> zzedc-data-pvc</span></span>
<span id="cb15-44"><a href="#cb15-44" tabindex="-1"></a><span class="fu">spec</span><span class="kw">:</span></span>
<span id="cb15-45"><a href="#cb15-45" tabindex="-1"></a><span class="at">  </span><span class="fu">accessModes</span><span class="kw">:</span></span>
<span id="cb15-46"><a href="#cb15-46" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> ReadWriteOnce</span></span>
<span id="cb15-47"><a href="#cb15-47" tabindex="-1"></a><span class="at">  </span><span class="fu">resources</span><span class="kw">:</span></span>
<span id="cb15-48"><a href="#cb15-48" tabindex="-1"></a><span class="at">    </span><span class="fu">requests</span><span class="kw">:</span></span>
<span id="cb15-49"><a href="#cb15-49" tabindex="-1"></a><span class="at">      </span><span class="fu">storage</span><span class="kw">:</span><span class="at"> 10Gi</span></span>
<span id="cb15-50"><a href="#cb15-50" tabindex="-1"></a></span>
<span id="cb15-51"><a href="#cb15-51" tabindex="-1"></a><span class="pp">---</span></span>
<span id="cb15-52"><a href="#cb15-52" tabindex="-1"></a><span class="fu">apiVersion</span><span class="kw">:</span><span class="at"> v1</span></span>
<span id="cb15-53"><a href="#cb15-53" tabindex="-1"></a><span class="fu">kind</span><span class="kw">:</span><span class="at"> ConfigMap</span></span>
<span id="cb15-54"><a href="#cb15-54" tabindex="-1"></a><span class="fu">metadata</span><span class="kw">:</span></span>
<span id="cb15-55"><a href="#cb15-55" tabindex="-1"></a><span class="at">  </span><span class="fu">name</span><span class="kw">:</span><span class="at"> zzedc-config</span></span>
<span id="cb15-56"><a href="#cb15-56" tabindex="-1"></a><span class="fu">data</span><span class="kw">:</span></span>
<span id="cb15-57"><a href="#cb15-57" tabindex="-1"></a><span class="fu">  zzedc_config.yml</span><span class="kw">: </span><span class="ch">|</span></span>
<span id="cb15-58"><a href="#cb15-58" tabindex="-1"></a>    study:</span>
<span id="cb15-59"><a href="#cb15-59" tabindex="-1"></a>      name: &quot;Production Trial&quot;</span>
<span id="cb15-60"><a href="#cb15-60" tabindex="-1"></a>      protocol_id: &quot;PROD-2024-001&quot;</span>
<span id="cb15-61"><a href="#cb15-61" tabindex="-1"></a>      ...</span>
<span id="cb15-62"><a href="#cb15-62" tabindex="-1"></a></span>
<span id="cb15-63"><a href="#cb15-63" tabindex="-1"></a><span class="pp">---</span></span>
<span id="cb15-64"><a href="#cb15-64" tabindex="-1"></a><span class="fu">apiVersion</span><span class="kw">:</span><span class="at"> v1</span></span>
<span id="cb15-65"><a href="#cb15-65" tabindex="-1"></a><span class="fu">kind</span><span class="kw">:</span><span class="at"> Service</span></span>
<span id="cb15-66"><a href="#cb15-66" tabindex="-1"></a><span class="fu">metadata</span><span class="kw">:</span></span>
<span id="cb15-67"><a href="#cb15-67" tabindex="-1"></a><span class="at">  </span><span class="fu">name</span><span class="kw">:</span><span class="at"> zzedc-service</span></span>
<span id="cb15-68"><a href="#cb15-68" tabindex="-1"></a><span class="fu">spec</span><span class="kw">:</span></span>
<span id="cb15-69"><a href="#cb15-69" tabindex="-1"></a><span class="at">  </span><span class="fu">selector</span><span class="kw">:</span></span>
<span id="cb15-70"><a href="#cb15-70" tabindex="-1"></a><span class="at">    </span><span class="fu">app</span><span class="kw">:</span><span class="at"> zzedc</span></span>
<span id="cb15-71"><a href="#cb15-71" tabindex="-1"></a><span class="at">  </span><span class="fu">ports</span><span class="kw">:</span></span>
<span id="cb15-72"><a href="#cb15-72" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="fu">protocol</span><span class="kw">:</span><span class="at"> TCP</span></span>
<span id="cb15-73"><a href="#cb15-73" tabindex="-1"></a><span class="at">    </span><span class="fu">port</span><span class="kw">:</span><span class="at"> </span><span class="dv">443</span></span>
<span id="cb15-74"><a href="#cb15-74" tabindex="-1"></a><span class="at">    </span><span class="fu">targetPort</span><span class="kw">:</span><span class="at"> </span><span class="dv">3838</span></span>
<span id="cb15-75"><a href="#cb15-75" tabindex="-1"></a><span class="at">  </span><span class="fu">type</span><span class="kw">:</span><span class="at"> LoadBalancer</span></span></code></pre></div>
<hr />
</div>
</div>
<div id="ssltls-configuration" class="section level2">
<h2>SSL/TLS Configuration</h2>
<div id="self-signed-certificate-testing" class="section level3">
<h3>Self-Signed Certificate (Testing)</h3>
<div class="sourceCode" id="cb16"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb16-1"><a href="#cb16-1" tabindex="-1"></a><span class="ex">openssl</span> req <span class="at">-x509</span> <span class="at">-newkey</span> rsa:4096 <span class="at">-keyout</span> key.pem <span class="at">-out</span> cert.pem <span class="at">-days</span> 365 <span class="at">-nodes</span></span>
<span id="cb16-2"><a href="#cb16-2" tabindex="-1"></a></span>
<span id="cb16-3"><a href="#cb16-3" tabindex="-1"></a><span class="co"># Then configure in ZZedc config</span></span></code></pre></div>
</div>
<div id="aws-certificate-manager-production" class="section level3">
<h3>AWS Certificate Manager (Production)</h3>
<p>Use AWS Certificate Manager for free SSL certificates integrated with
ELB.</p>
</div>
<div id="nginx-reverse-proxy" class="section level3">
<h3>nginx Reverse Proxy</h3>
<pre class="nginx"><code>upstream zzedc {
  server localhost:3838;
}

server {
  listen 443 ssl;
  server_name trial.example.org;

  ssl_certificate /path/to/cert.pem;
  ssl_certificate_key /path/to/key.pem;

  location / {
    proxy_pass http://zzedc;
    proxy_http_version 1.1;
    proxy_set_header Upgrade $http_upgrade;
    proxy_set_header Connection &quot;upgrade&quot;;
    proxy_set_header Host $host;
  }
}

server {
  listen 80;
  server_name trial.example.org;
  return 301 https://$server_name$request_uri;
}</code></pre>
<hr />
</div>
</div>
<div id="environment-variables" class="section level2">
<h2>Environment Variables</h2>
<div id="configuration-via-environment" class="section level3">
<h3>Configuration via Environment</h3>
<p>Instead of config file, use environment variables:</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb18-1"><a href="#cb18-1" tabindex="-1"></a><span class="bu">export</span> <span class="va">STUDY_NAME</span><span class="op">=</span><span class="st">&quot;My Trial&quot;</span></span>
<span id="cb18-2"><a href="#cb18-2" tabindex="-1"></a><span class="bu">export</span> <span class="va">PROTOCOL_ID</span><span class="op">=</span><span class="st">&quot;TRIAL-001&quot;</span></span>
<span id="cb18-3"><a href="#cb18-3" tabindex="-1"></a><span class="bu">export</span> <span class="va">ADMIN_USERNAME</span><span class="op">=</span><span class="st">&quot;admin&quot;</span></span>
<span id="cb18-4"><a href="#cb18-4" tabindex="-1"></a><span class="bu">export</span> <span class="va">ADMIN_PASSWORD</span><span class="op">=</span><span class="st">&quot;SecurePass123!&quot;</span></span>
<span id="cb18-5"><a href="#cb18-5" tabindex="-1"></a><span class="bu">export</span> <span class="va">ZZEDC_SALT</span><span class="op">=</span><span class="st">&quot;[generated_salt]&quot;</span></span>
<span id="cb18-6"><a href="#cb18-6" tabindex="-1"></a></span>
<span id="cb18-7"><a href="#cb18-7" tabindex="-1"></a><span class="ex">Rscript</span> <span class="at">-e</span> <span class="st">&quot;zzedc::init(mode = &#39;env&#39;)&quot;</span></span></code></pre></div>
<hr />
</div>
</div>
<div id="automated-backups" class="section level2">
<h2>Automated Backups</h2>
<div id="daily-backup-script" class="section level3">
<h3>Daily Backup Script</h3>
<div class="sourceCode" id="cb19"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb19-1"><a href="#cb19-1" tabindex="-1"></a><span class="co">#!/bin/bash</span></span>
<span id="cb19-2"><a href="#cb19-2" tabindex="-1"></a><span class="co"># backup_daily.sh</span></span>
<span id="cb19-3"><a href="#cb19-3" tabindex="-1"></a></span>
<span id="cb19-4"><a href="#cb19-4" tabindex="-1"></a><span class="va">BACKUP_DIR</span><span class="op">=</span><span class="st">&quot;/srv/zzedc/backups&quot;</span></span>
<span id="cb19-5"><a href="#cb19-5" tabindex="-1"></a><span class="va">RETENTION_DAYS</span><span class="op">=</span>30</span>
<span id="cb19-6"><a href="#cb19-6" tabindex="-1"></a></span>
<span id="cb19-7"><a href="#cb19-7" tabindex="-1"></a><span class="co"># Create dated backup</span></span>
<span id="cb19-8"><a href="#cb19-8" tabindex="-1"></a><span class="va">BACKUP_FILE</span><span class="op">=</span><span class="st">&quot;</span><span class="va">$BACKUP_DIR</span><span class="st">/zzedc_</span><span class="va">$(</span><span class="fu">date</span> +%Y%m%d_%H%M%S<span class="va">)</span><span class="st">.db.gz&quot;</span></span>
<span id="cb19-9"><a href="#cb19-9" tabindex="-1"></a><span class="fu">gzip</span> <span class="at">-c</span> /srv/zzedc/data/zzedc.db <span class="op">&gt;</span> <span class="st">&quot;</span><span class="va">$BACKUP_FILE</span><span class="st">&quot;</span></span>
<span id="cb19-10"><a href="#cb19-10" tabindex="-1"></a></span>
<span id="cb19-11"><a href="#cb19-11" tabindex="-1"></a><span class="co"># Upload to S3</span></span>
<span id="cb19-12"><a href="#cb19-12" tabindex="-1"></a><span class="ex">aws</span> s3 cp <span class="st">&quot;</span><span class="va">$BACKUP_FILE</span><span class="st">&quot;</span> <span class="st">&quot;s3://my-backup-bucket/zzedc/&quot;</span></span>
<span id="cb19-13"><a href="#cb19-13" tabindex="-1"></a></span>
<span id="cb19-14"><a href="#cb19-14" tabindex="-1"></a><span class="co"># Clean old backups</span></span>
<span id="cb19-15"><a href="#cb19-15" tabindex="-1"></a><span class="fu">find</span> <span class="st">&quot;</span><span class="va">$BACKUP_DIR</span><span class="st">&quot;</span> <span class="at">-name</span> <span class="st">&quot;*.db.gz&quot;</span> <span class="at">-mtime</span> +<span class="va">$RETENTION_DAYS</span> <span class="at">-delete</span></span>
<span id="cb19-16"><a href="#cb19-16" tabindex="-1"></a></span>
<span id="cb19-17"><a href="#cb19-17" tabindex="-1"></a><span class="bu">echo</span> <span class="st">&quot;Backup completed: </span><span class="va">$BACKUP_FILE</span><span class="st">&quot;</span></span></code></pre></div>
</div>
<div id="cron-job" class="section level3">
<h3>Cron Job</h3>
<div class="sourceCode" id="cb20"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb20-1"><a href="#cb20-1" tabindex="-1"></a><span class="co"># Daily backup at 2 AM</span></span>
<span id="cb20-2"><a href="#cb20-2" tabindex="-1"></a><span class="ex">0</span> 2 <span class="pp">*</span> <span class="pp">*</span> <span class="pp">*</span> /srv/zzedc/backup_daily.sh <span class="op">&gt;&gt;</span> /var/log/zzedc_backup.log <span class="dv">2</span><span class="op">&gt;&amp;</span><span class="dv">1</span></span></code></pre></div>
<hr />
</div>
</div>
<div id="monitoring-logging" class="section level2">
<h2>Monitoring &amp; Logging</h2>
<div id="cloudwatch-integration" class="section level3">
<h3>CloudWatch Integration</h3>
<div class="sourceCode" id="cb21"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb21-1"><a href="#cb21-1" tabindex="-1"></a><span class="co"># In config.yml</span></span>
<span id="cb21-2"><a href="#cb21-2" tabindex="-1"></a><span class="fu">logging</span><span class="kw">:</span></span>
<span id="cb21-3"><a href="#cb21-3" tabindex="-1"></a><span class="at">  </span><span class="fu">level</span><span class="kw">:</span><span class="at"> info</span></span>
<span id="cb21-4"><a href="#cb21-4" tabindex="-1"></a><span class="at">  </span><span class="fu">format</span><span class="kw">:</span><span class="at"> json</span><span class="co">  # For CloudWatch parsing</span></span>
<span id="cb21-5"><a href="#cb21-5" tabindex="-1"></a><span class="at">  </span><span class="fu">cloudwatch</span><span class="kw">:</span></span>
<span id="cb21-6"><a href="#cb21-6" tabindex="-1"></a><span class="at">    </span><span class="fu">enabled</span><span class="kw">:</span><span class="at"> </span><span class="ch">true</span></span>
<span id="cb21-7"><a href="#cb21-7" tabindex="-1"></a><span class="at">    </span><span class="fu">log_group</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;/aws/zzedc/production&quot;</span></span>
<span id="cb21-8"><a href="#cb21-8" tabindex="-1"></a><span class="at">    </span><span class="fu">log_stream</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;zzedc-instance&quot;</span></span></code></pre></div>
</div>
<div id="log-aggregation" class="section level3">
<h3>Log Aggregation</h3>
<div class="sourceCode" id="cb22"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb22-1"><a href="#cb22-1" tabindex="-1"></a><span class="co"># View logs</span></span>
<span id="cb22-2"><a href="#cb22-2" tabindex="-1"></a><span class="fu">tail</span> <span class="at">-f</span> /srv/zzedc/zzedc.log</span>
<span id="cb22-3"><a href="#cb22-3" tabindex="-1"></a></span>
<span id="cb22-4"><a href="#cb22-4" tabindex="-1"></a><span class="co"># Parse specific events</span></span>
<span id="cb22-5"><a href="#cb22-5" tabindex="-1"></a><span class="fu">grep</span> <span class="st">&quot;ERROR&quot;</span> /srv/zzedc/zzedc.log</span>
<span id="cb22-6"><a href="#cb22-6" tabindex="-1"></a><span class="fu">grep</span> <span class="st">&quot;user.*login&quot;</span> /srv/zzedc/zzedc.log</span></code></pre></div>
<hr />
</div>
</div>
<div id="security-best-practices" class="section level2">
<h2>Security Best Practices</h2>
<p> Use environment variables for secrets (not in config files) 
Enable HTTPS in production  Use AWS Secrets Manager for sensitive
values  Enable audit logging for compliance  Restrict security group
to necessary IPs  Regular database backups with verification 
Monitor CloudTrail for AWS API calls  Use IAM roles instead of access
keys</p>
<hr />
</div>
<div id="troubleshooting" class="section level2">
<h2>Troubleshooting</h2>
<div id="setup-fails-package-not-found" class="section level3">
<h3>Setup fails: Package not found</h3>
<div class="sourceCode" id="cb23"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb23-1"><a href="#cb23-1" tabindex="-1"></a><span class="co"># Ensure zzedc is installed</span></span>
<span id="cb23-2"><a href="#cb23-2" tabindex="-1"></a><span class="ex">Rscript</span> <span class="at">-e</span> <span class="st">&quot;install.packages(&#39;zzedc&#39;, repos=&#39;http://cran.r-project.org&#39;)&quot;</span></span></code></pre></div>
</div>
<div id="port-3838-already-in-use" class="section level3">
<h3>Port 3838 already in use</h3>
<div class="sourceCode" id="cb24"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb24-1"><a href="#cb24-1" tabindex="-1"></a><span class="co"># Find process using port</span></span>
<span id="cb24-2"><a href="#cb24-2" tabindex="-1"></a><span class="ex">lsof</span> <span class="at">-i</span> :3838</span>
<span id="cb24-3"><a href="#cb24-3" tabindex="-1"></a></span>
<span id="cb24-4"><a href="#cb24-4" tabindex="-1"></a><span class="co"># Kill if needed</span></span>
<span id="cb24-5"><a href="#cb24-5" tabindex="-1"></a><span class="bu">kill</span> <span class="at">-9</span> <span class="op">&lt;</span>PID<span class="op">&gt;</span></span></code></pre></div>
</div>
<div id="database-permission-denied" class="section level3">
<h3>Database permission denied</h3>
<div class="sourceCode" id="cb25"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb25-1"><a href="#cb25-1" tabindex="-1"></a><span class="co"># Ensure write permissions</span></span>
<span id="cb25-2"><a href="#cb25-2" tabindex="-1"></a><span class="fu">chmod</span> <span class="at">-R</span> 755 /srv/zzedc/data</span>
<span id="cb25-3"><a href="#cb25-3" tabindex="-1"></a><span class="fu">chown</span> <span class="at">-R</span> ec2-user /srv/zzedc</span></code></pre></div>
</div>
<div id="https-certificate-errors" class="section level3">
<h3>HTTPS certificate errors</h3>
<ul>
<li>Use AWS Certificate Manager</li>
<li>Or generate with Lets Encrypt</li>
<li>Ensure cert paths correct in config</li>
</ul>
<hr />
</div>
</div>
<div id="summary" class="section level2">
<h2>Summary</h2>
<p> Create <code>zzedc_config.yml</code>  Run
<code>zzedc::init(mode = &#39;config&#39;, ...)</code>  Set
<code>ZZEDC_SALT</code> environment variable  Launch with
<code>launch_zzedc()</code>  Access via HTTPS with certificate 
Configure backups and monitoring  Scale horizontally with load
balancer</p>
<p><strong>Non-interactive, fully automated ZZedc
deployment</strong></p>
</div>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
