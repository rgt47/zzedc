% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/aws_kms_utils.R
\name{rotate_encryption_key}
\alias{rotate_encryption_key}
\title{Rotate Database Encryption Key via AWS KMS}
\usage{
rotate_encryption_key(new_key)
}
\arguments{
\item{new_key}{Character: New 64-hex-character encryption key (from generate_db_key)}
}
\value{
List with rotation status:
\itemize{
\item success: Logical TRUE if rotation successful
\item old_key_archived: Logical TRUE if old key saved
\item new_key_active: Logical TRUE if new key now active
\item timestamp: Rotation timestamp
\item old_version_id: AWS version ID of archived old key
\item new_version_id: AWS version ID of new key
\item message: Human-readable status message
\item error: Error message if rotation failed
}
}
\description{
Rotates the active encryption key by archiving the old key and activating a new one.
This function is used for planned key rotation in production environments.
}
\details{
Key Rotation Procedure:
\enumerate{
\item Validate new key format (64 hex chars, lowercase)
\item Retrieve current key from AWS Secrets Manager
\item Archive current key with timestamp metadata
\item Store new key as active in AWS Secrets Manager
\item Return rotation confirmation with version IDs
}

After key rotation, the database must be re-encrypted with the new key.
}
\examples{
\dontrun{
  new_key <- generate_db_key()
  result <- rotate_encryption_key(new_key)
  if (result$success) {
    cat("Key rotation successful\n")
  }
}

}
