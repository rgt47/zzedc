% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/encryption_utils.R
\name{get_encryption_key}
\alias{get_encryption_key}
\title{Get database encryption key from environment or AWS KMS}
\usage{
get_encryption_key(aws_kms_key_id = NULL)
}
\arguments{
\item{aws_kms_key_id}{Character: AWS KMS key ID (optional)}
}
\value{
Character: 64-char hex encryption key
}
\description{
Retrieves encryption key with automatic fallback:
\enumerate{
\item Try AWS KMS (if credentials and key_id provided)
\item Try environment variable DB_ENCRYPTION_KEY
\item Error if neither available
}
}
\details{
Priority order:
\enumerate{
\item AWS KMS (if aws_kms_key_id provided or USE_AWS_KMS=true)
\itemize{
\item Requires paws package
\item Requires AWS credentials (~/.aws/credentials or env vars)
\item Requires AWS IAM permissions for Secrets Manager
}
\item Environment variable DB_ENCRYPTION_KEY
\itemize{
\item Set with: Sys.setenv(DB_ENCRYPTION_KEY = "...")
\item Best for development
}
\item Error if neither available
\itemize{
\item Helpful error message with setup instructions
}
}
}
\examples{
\dontrun{
  # Development (environment variable):
  Sys.setenv(DB_ENCRYPTION_KEY = "a1b2c3d4...")
  key <- get_encryption_key()

  # Production (AWS KMS):
  key <- get_encryption_key(aws_kms_key_id = "arn:aws:kms:...")
}

}
