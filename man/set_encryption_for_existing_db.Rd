% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/db_connection.R
\name{set_encryption_for_existing_db}
\alias{set_encryption_for_existing_db}
\title{Enable Encryption on Existing Database}
\usage{
set_encryption_for_existing_db(db_path, new_key = NULL)
}
\arguments{
\item{db_path}{Character: Path to existing database}

\item{new_key}{Character: Encryption key to use (optional, generates if NULL)}
}
\value{
List with encryption setup results:
\itemize{
\item success: Logical TRUE if successful
\item encrypted: Logical TRUE if now encrypted
\item backup_created: Logical TRUE if backup saved
\item key_stored: Logical TRUE if key securely stored
\item message: Status message
}
}
\description{
Converts an existing unencrypted database to use encryption.
}
\details{
Process:
\enumerate{
\item Verify database exists
\item Create backup copy
\item Generate or use provided encryption key
\item Enable encryption on database
\item Verify encryption working
\item Store key in environment or AWS KMS
}

\strong{Important}: This enables encryption on the database file but does NOT
re-encrypt existing data. New data written will be encrypted. For full
re-encryption, use a database migration tool.
}
\examples{
\dontrun{
  result <- set_encryption_for_existing_db(
    db_path = "./data/existing.db",
    new_key = generate_db_key()
  )
  if (result$success) {
    cat("Encryption enabled!\n")
  }
}

}
