% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/db_connection.R
\name{connect_encrypted_db}
\alias{connect_encrypted_db}
\title{Connect to Encrypted Database}
\usage{
connect_encrypted_db(db_path = NULL, aws_kms_key_id = NULL)
}
\arguments{
\item{db_path}{Character: Path to database file (optional, uses get_db_path if NULL)}

\item{aws_kms_key_id}{Character: AWS KMS key ID for production (optional)}
}
\value{
DBI SQLite connection object with encryption enabled
}
\description{
Main wrapper function for encrypted database connections.
Transparently handles encryption at the connection layer.
}
\details{
This function:
\enumerate{
\item Gets database path (from parameter or environment)
\item Retrieves encryption key (from environment or AWS KMS)
\item Connects to SQLite with encryption key
\item Returns standard DBI connection object
}

Encryption is transparent - all existing SQL queries work unchanged.
}
\examples{
\dontrun{
  # Development (environment variable):
  Sys.setenv(DB_ENCRYPTION_KEY = "a1b2c3d4...")
  conn <- connect_encrypted_db()

  # Production (AWS KMS):
  conn <- connect_encrypted_db(aws_kms_key_id = "arn:aws:kms:...")

  # Use connection normally
  result <- DBI::dbGetQuery(conn, "SELECT * FROM subjects")
  DBI::dbDisconnect(conn)
}

}
